2018/07/12 10:44:32 [notice] 3040#4496: signal process started
2018/07/12 10:44:33 [notice] 4012#5888: using inherited sockets from "448;432;424;436;"
2018/07/12 10:44:34 [error] 4012#5604: *14 lua entry thread aborted: runtime error: openresty_test/lua/json_test.lua:39: Cannot serialise table: excessively sparse array
stack traceback:
coroutine 0:
	[C]: in function 'encode'
	openresty_test/lua/json_test.lua:39: in function <openresty_test/lua/json_test.lua:1>, client: 127.0.0.1, server: , request: "GET /json_test HTTP/1.1", host: "localhost:6699"
2018/07/12 10:45:12 [notice] 764#4884: signal process started
2018/07/12 10:45:13 [notice] 5696#732: using inherited sockets from "432;448;444;476;"
2018/07/12 10:45:14 [error] 5696#5524: *15 lua entry thread aborted: runtime error: openresty_test/lua/json_test.lua:39: bad argument #1 to 'encode_sparse_array' (string expected, got table)
stack traceback:
coroutine 0:
	[C]: in function 'encode_sparse_array'
	openresty_test/lua/json_test.lua:39: in function <openresty_test/lua/json_test.lua:1>, client: 127.0.0.1, server: , request: "GET /json_test HTTP/1.1", host: "localhost:6699"
2018/07/12 10:45:50 [notice] 6092#4452: signal process started
2018/07/12 10:45:51 [notice] 5684#4680: using inherited sockets from "448;432;500;496;"
2018/07/12 10:57:29 [notice] 4416#2468: signal process started
2018/07/12 10:57:30 [notice] 4060#6132: using inherited sockets from "432;448;424;436;"
2018/07/12 10:59:31 [notice] 3708#4624: signal process started
2018/07/12 10:59:32 [notice] 5152#5132: using inherited sockets from "448;432;444;476;"
2018/07/12 10:59:55 [notice] 5804#4680: signal process started
2018/07/12 10:59:56 [notice] 4416#5788: using inherited sockets from "432;448;500;496;"
2018/07/12 11:00:22 [notice] 5548#4140: signal process started
2018/07/12 11:00:23 [notice] 4924#6120: using inherited sockets from "448;432;424;436;"
2018/07/12 11:00:52 [notice] 6064#3612: signal process started
2018/07/12 11:00:53 [notice] 5832#3708: using inherited sockets from "432;448;444;476;"
2018/07/12 11:01:31 [notice] 5996#5328: signal process started
2018/07/12 11:01:32 [notice] 5380#4424: using inherited sockets from "448;432;500;496;"
2018/07/12 19:30:48 [emerg] 7568#9140: unknown directive "bodyfilter_by_lua_file" in openresty_test/conf/nginx.conf:40
2018/07/12 19:31:11 [notice] 8520#8440: signal process started
2018/07/12 19:31:13 [notice] 8552#9120: using inherited sockets from "432;448;424;436;"
2018/07/12 19:37:44 [notice] 8228#6412: signal process started
2018/07/12 19:37:45 [notice] 8392#6132: using inherited sockets from "448;432;444;476;"
2018/07/12 19:38:29 [notice] 8520#1132: signal process started
2018/07/12 19:38:30 [notice] 8660#7948: using inherited sockets from "432;448;500;496;"
2018/07/13 10:30:01 [notice] 260#2500: signal process started
2018/07/13 10:30:01 [error] 260#2500: OpenEvent("Global\ngx_reload_5352") failed (2: The system cannot find the file specified)
2018/07/13 10:30:08 [notice] 1548#5000: using inherited sockets from "452;448;480;484;"
2018/07/13 10:30:32 [error] 1548#2420: *1 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:4: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 10:30:39 [error] 1548#2420: *4 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:4: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:30:46 [error] 1548#2420: *7 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:4: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 10:38:54 [error] 1548#2420: *10 failed to load external Lua file "openresty_test/lua/get_avg_upstreamtime.lua": openresty_test/lua/get_avg_upstreamtime.lua:7: unexpected symbol near ')', client: 127.0.0.1, server: , request: "GET /status HTTP/1.1", host: "localhost:6699"
2018/07/13 10:40:38 [error] 1548#2420: *11 failed to load external Lua file "openresty_test/lua/get_avg_upstreamtime.lua": openresty_test/lua/get_avg_upstreamtime.lua:7: unexpected symbol near ')', client: 127.0.0.1, server: , request: "GET /status HTTP/1.1", host: "localhost:6699"
2018/07/13 10:41:41 [error] 1548#2420: *12 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:4: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:41:53 [error] 1548#2420: *16 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:4: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:45:02 [notice] 3880#5148: signal process started
2018/07/13 10:45:03 [notice] 2816#6556: using inherited sockets from "448;452;508;504;"
2018/07/13 10:45:16 [error] 2816#7120: *20 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:4: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:46:49 [notice] 2872#6152: signal process started
2018/07/13 10:46:50 [notice] 6708#4712: using inherited sockets from "452;448;428;440;"
2018/07/13 10:46:53 [error] 6708#6280: *24 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:5: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:47:13 [notice] 1184#6972: signal process started
2018/07/13 10:47:14 [notice] 228#7004: using inherited sockets from "448;452;480;484;"
2018/07/13 10:47:16 [error] 228#6880: *27 failed to load external Lua file "openresty_test/lua/upstream_time_statistic.lua": openresty_test/lua/upstream_time_statistic.lua:5: '=' expected near '+' while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:48:39 [error] 228#6880: *31 [lua] upstream_time_statistic.lua:3: 0 while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:50:48 [error] 228#6880: *34 [lua] upstream_time_statistic.lua:3: 0 while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 10:51:44 [error] 228#6880: *37 [lua] upstream_time_statistic.lua:3: 0 while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 11:01:53 [notice] 6600#5692: signal process started
2018/07/13 11:01:54 [notice] 3192#6152: using inherited sockets from "452;448;508;504;"
2018/07/13 11:02:30 [error] 3192#6556: *40 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", host: "localhost:6699"
2018/07/13 11:02:30 [error] 3192#6556: *40 failed to run log_by_lua*: openresty_test/lua/upstream_time_statistic.lua:7: attempt to perform arithmetic on local 'upstream_time' (a nil value)
stack traceback:
	openresty_test/lua/upstream_time_statistic.lua:7: in function <openresty_test/lua/upstream_time_statistic.lua:1> while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", host: "localhost:6699"
2018/07/13 11:29:21 [notice] 6260#6832: signal process started
2018/07/13 11:29:22 [notice] 6636#6528: using inherited sockets from "448;452;428;440;"
2018/07/13 11:30:38 [error] 6636#5236: *41 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:30:43 [error] 6636#5236: *44 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 11:31:36 [notice] 7112#5136: signal process started
2018/07/13 11:31:37 [notice] 4848#6188: using inherited sockets from "452;448;480;484;"
2018/07/13 11:31:39 [error] 4848#3284: *50 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:31:40 [error] 4848#3284: *53 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /world HTTP/1.1", upstream: "http://127.0.0.1:8080/world", host: "localhost:6699"
2018/07/13 11:32:50 [notice] 5904#1068: signal process started
2018/07/13 11:32:51 [notice] 6392#5000: using inherited sockets from "448;452;508;504;"
2018/07/13 11:32:52 [error] 6392#4508: *57 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:33:13 [notice] 6696#6508: signal process started
2018/07/13 11:33:14 [notice] 5784#6544: using inherited sockets from "452;448;428;440;"
2018/07/13 11:33:39 [notice] 6240#6212: signal process started
2018/07/13 11:33:40 [notice] 5708#6388: using inherited sockets from "448;452;480;484;"
2018/07/13 11:36:25 [notice] 6732#5364: signal process started
2018/07/13 11:36:26 [notice] 6188#4848: using inherited sockets from "452;448;508;504;"
2018/07/13 11:36:28 [error] 6188#6788: *63 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:36:41 [error] 6188#6788: *66 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:36:41 [error] 6188#6788: *70 CreateFile() "openresty_test/html/www.baidu.com" failed (3: The system cannot find the path specified), client: 127.0.0.1, server: , request: "GET /www.baidu.com HTTP/1.0", host: "remote_hello"
2018/07/13 11:36:41 [error] 6188#6788: *66 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /www.baidu.com HTTP/1.1", upstream: "http://127.0.0.1:8080/www.baidu.com", host: "localhost:6699"
2018/07/13 11:37:03 [error] 6188#6788: *71 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:37:03 [error] 6188#6788: *75 CreateFile() "openresty_test/html/www.baidu.com" failed (3: The system cannot find the path specified), client: 127.0.0.1, server: , request: "GET /www.baidu.com HTTP/1.0", host: "remote_hello"
2018/07/13 11:37:03 [error] 6188#6788: *71 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /www.baidu.com HTTP/1.1", upstream: "http://127.0.0.1:8080/www.baidu.com", host: "localhost:6699"
2018/07/13 11:37:19 [error] 6188#6788: *76 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:37:29 [error] 6188#6788: *79 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /hello HTTP/1.1", upstream: "http://127.0.0.1:8080/hello", host: "localhost:6699"
2018/07/13 11:37:29 [error] 6188#6788: *83 CreateFile() "openresty_test/html/www.baidu.com" failed (3: The system cannot find the path specified), client: 127.0.0.1, server: , request: "GET /www.baidu.com HTTP/1.0", host: "remote_hello"
2018/07/13 11:37:29 [error] 6188#6788: *79 [lua] upstream_time_statistic.lua:4: hello while logging request, client: 127.0.0.1, server: , request: "GET /www.baidu.com HTTP/1.1", upstream: "http://127.0.0.1:8080/www.baidu.com", host: "localhost:6699"
2018/07/13 11:39:50 [notice] 6556#1396: signal process started
2018/07/13 11:39:52 [notice] 6344#6584: using inherited sockets from "448;452;428;440;"
2018/07/13 11:39:53 [error] 6344#6548: *85 lua entry thread aborted: runtime error: openresty_test/lua/get_avg_upstreamtime.lua:4: attempt to call global 'tonum' (a nil value)
stack traceback:
coroutine 0:
	openresty_test/lua/get_avg_upstreamtime.lua: in function <openresty_test/lua/get_avg_upstreamtime.lua:1>, client: 127.0.0.1, server: , request: "GET /status HTTP/1.1", host: "localhost:6699"
2018/07/13 11:40:09 [notice] 2568#5692: signal process started
2018/07/13 11:40:10 [notice] 6348#1708: using inherited sockets from "452;448;480;484;"
2018/07/13 11:40:29 [notice] 5708#6784: signal process started
2018/07/13 11:40:30 [notice] 6724#4692: using inherited sockets from "448;452;508;504;"
2018/07/13 11:41:01 [notice] 3904#6696: signal process started
2018/07/13 11:41:02 [notice] 2468#6868: using inherited sockets from "452;448;428;440;"
2018/07/13 11:42:42 [notice] 5784#7024: signal process started
2018/07/13 11:42:43 [notice] 7148#6540: using inherited sockets from "448;452;480;484;"
2018/07/13 11:43:38 [notice] 7088#3808: signal process started
2018/07/13 11:43:39 [notice] 2996#1812: using inherited sockets from "452;448;508;504;"
2018/07/13 11:45:36 [notice] 6908#6976: signal process started
2018/07/13 11:45:37 [notice] 6784#6644: using inherited sockets from "448;452;428;440;"
2018/07/13 11:51:42 [notice] 1684#5136: signal process started
2018/07/13 11:51:43 [notice] 6092#5240: using inherited sockets from "452;448;480;484;"
2018/07/13 11:59:34 [notice] 7460#7464: signal process started
2018/07/13 11:59:35 [notice] 7504#7508: using inherited sockets from "448;452;508;504;"
2018/07/13 12:56:17 [notice] 7376#7472: signal process started
2018/07/13 12:56:17 [notice] 6192#1460: using inherited sockets from "452;448;428;440;"
2018/07/13 12:57:34 [notice] 7136#5800: using inherited sockets from "448;444;476;480;"
